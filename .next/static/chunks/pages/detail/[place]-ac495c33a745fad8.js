(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[655],{330:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/detail/[place]",function(){return s(6897)}])},3834:()=>{},4620:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var l=s(7876),i=s(4232),t=s(1772),n=s(1041);let c=e=>{let{place:a,size:s="medium",showLabel:c=!1,onUpdate:d,onRemoveConfirm:r}=e,[o,m]=(0,i.useState)(!1),[_,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=localStorage.getItem("micheltain_myplace");e&&m(JSON.parse(e).some(e=>e.name===a.name))},[a.name]);let x=async()=>{if(o){if(r&&!await r(a))return;let e=localStorage.getItem("micheltain_myplace");if(e){let s=JSON.parse(e).filter(e=>e.name!==a.name);localStorage.setItem("micheltain_myplace",JSON.stringify(s)),m(!1),null==d||d()}}else{let e=localStorage.getItem("micheltain_myplace"),s=e?JSON.parse(e):[];s.some(e=>e.name===a.name)||(localStorage.setItem("micheltain_myplace",JSON.stringify([...s,a])),m(!0),h(!0),null==d||d(),setTimeout(()=>h(!1),600))}},j=()=>o?"저장됨":"여행 계획에 추가";return(0,l.jsxs)("button",{className:(()=>{let e="add-my-place-btn";return e+=" add-my-place-btn--".concat(s),o&&(e+=" add-my-place-btn--added"),_&&(e+=" add-my-place-btn--animating"),e})(),onClick:x,"aria-label":o?"여행 계획에서 제거":"여행 계획에 추가",title:j(),children:[(0,l.jsx)(t.g,{icon:_?n.e68:o?n.qcK:n.QLR}),c&&(0,l.jsx)("span",{className:"add-my-place-label",children:j()})]})}},6897:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>h});var l=s(7876),i=s(4232),t=s(9099),n=s(1772),c=s(1041),d=s(7888),r=s(7109);s(8953),s(2161),s(6667),s(3834);var o=s(8312),m=s(5665),_=s(4620);let h=()=>{let e=(0,t.useRouter)(),{place:a}=e.query,s=e.query.prevViewType||"지도",[h,x]=(0,i.useState)(),[j,v]=(0,i.useState)(!1),[u,N]=(0,i.useState)(new Set),[p,g]=(0,i.useState)(!1),y=()=>{e.push({pathname:"/",query:{prevViewType:s}})},b=e=>{N(a=>new Set(a).add(e))},w=async()=>{try{await navigator.clipboard.writeText((null==h?void 0:h.addressDetail)||(null==h?void 0:h.address)||""),g(!0),setTimeout(()=>g(!1),2e3)}catch(a){let e=document.createElement("textarea");e.value=(null==h?void 0:h.addressDetail)||(null==h?void 0:h.address)||"",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),g(!0),setTimeout(()=>g(!1),2e3)}},f=async()=>{if(!a)return;let e=Array.isArray(a)?a[0]:a,s=(0,m.P)((0,m.rJ)(o.C5,"places"),(0,m._M)("name","==",e));(0,m.aQ)(s,e=>{e.docs.length>0&&(x(e.docs[0].data()),v(!0),N(new Set))})};return((0,i.useEffect)(()=>{f()},[a]),(0,i.useEffect)(()=>(document.body.style.overflow="auto",document.body.classList.add("detail__page-active"),()=>{document.body.style.overflow="hidden",document.body.classList.remove("detail__page-active")}),[]),j)?(0,l.jsxs)("div",{className:"detail__page",children:[(0,l.jsxs)("div",{className:"detail__background",children:[(0,l.jsx)("div",{className:"detail__wave"}),(0,l.jsx)("div",{className:"detail__wave"}),(0,l.jsx)("div",{className:"detail__wave"})]}),(0,l.jsx)("header",{className:"detail__header",children:(0,l.jsxs)("div",{className:"detail__nav",children:[(0,l.jsxs)("button",{className:"nav-btn nav-btn--back",onClick:y,children:[(0,l.jsx)(n.g,{icon:c.CeG}),(0,l.jsx)("span",{children:"뒤로"})]}),(0,l.jsxs)("div",{className:"detail__title-section",children:[(0,l.jsx)(n.g,{icon:c.Pcr,className:"title-icon"}),(0,l.jsx)("h1",{className:"detail__title",children:"장소 상세"})]}),(0,l.jsxs)("button",{className:"nav-btn nav-btn--home",onClick:()=>{e.push("/")},children:[(0,l.jsx)(n.g,{icon:c.v02}),(0,l.jsx)("span",{children:"홈"})]})]})}),(0,l.jsx)("main",{className:"detail__content",children:(0,l.jsx)("div",{className:"detail__container",children:(0,l.jsxs)("div",{className:"detail__card",children:[(0,l.jsxs)("div",{className:"detail__header-info",children:[(0,l.jsx)("h2",{className:"detail__name",children:null==h?void 0:h.name}),(null==h?void 0:h.type)&&(0,l.jsxs)("span",{className:"detail__type",children:[(0,l.jsx)(n.g,{icon:c._2z}),h.type]})]}),(null==h?void 0:h.attachmentUrlArray)&&h.attachmentUrlArray.length>0&&(0,l.jsx)("div",{className:"detail__image-section",children:1===h.attachmentUrlArray.length?(0,l.jsx)("div",{className:"detail__single-image",children:(0,l.jsxs)("div",{className:"swiper-zoom-container",children:[!u.has(0)&&(0,l.jsx)("div",{className:"image-skeleton",children:(0,l.jsx)("div",{className:"skeleton-shimmer"})}),(0,l.jsx)("img",{className:"detail__image ".concat(u.has(0)?"loaded":"loading"),src:h.attachmentUrlArray[0],alt:"".concat(h.name," 이미지"),loading:"lazy",onLoad:()=>b(0)})]})}):(0,l.jsxs)("div",{className:"detail__image-gallery",children:[(0,l.jsx)(d.RC,{modules:[r.Vx,r.dK,r.GP],spaceBetween:0,slidesPerView:1,navigation:!0,pagination:{clickable:!0,dynamicBullets:!0},zoom:{maxRatio:3,minRatio:1},className:"detail__swiper",children:h.attachmentUrlArray.map((e,a)=>(0,l.jsx)(d.qr,{children:(0,l.jsxs)("div",{className:"swiper-zoom-container",children:[!u.has(a)&&(0,l.jsx)("div",{className:"image-skeleton",children:(0,l.jsx)("div",{className:"skeleton-shimmer"})}),(0,l.jsx)("img",{className:"detail__image ".concat(u.has(a)?"loaded":"loading"),src:e,alt:"".concat(h.name," 이미지 ").concat(a+1),loading:"lazy",onLoad:()=>b(a)})]})},a))}),h.attachmentUrlArray.length>1&&(0,l.jsxs)("div",{className:"image-count",children:[(0,l.jsx)(n.g,{icon:c.Cyq}),h.attachmentUrlArray.length,"장의 사진"]})]})}),(0,l.jsxs)("div",{className:"detail__description-section",children:[(0,l.jsxs)("h3",{className:"section__title",children:[(0,l.jsx)(n.g,{icon:c.iW_}),"상세 설명"]}),(0,l.jsx)("p",{className:"detail__description",children:null==h?void 0:h.description})]}),(null==h?void 0:h.addressDetail)&&(0,l.jsx)("div",{className:"detail__address-section",children:(0,l.jsxs)("div",{className:"detail__address",children:[(0,l.jsxs)("div",{className:"address-content",children:[(0,l.jsx)(n.g,{icon:c.Pcr,className:"address-icon"}),(0,l.jsx)("span",{className:"address-text",children:h.addressDetail})]}),(0,l.jsx)("button",{className:"copy-btn ".concat(p?"copy-btn--copied":""),onClick:w,"aria-label":"주소 복사",title:p?"복사됨!":"주소 복사",children:(0,l.jsx)(n.g,{icon:p?c.e68:c.jPR})})]})}),(0,l.jsxs)("div",{className:"detail__actions",children:[h&&(0,l.jsx)(_.A,{place:h,size:"large",showLabel:!0}),(null==h?void 0:h.url)&&(0,l.jsxs)("a",{href:h.url,target:"_blank",rel:"noreferrer",className:"detail__external-link",children:[(0,l.jsx)(n.g,{icon:c.AaJ}),(0,l.jsx)("span",{children:"관련 사이트"})]})]})]})})}),(0,l.jsx)("footer",{className:"detail__footer",children:(0,l.jsxs)("span",{className:"copyright",children:["\xa9 ",new Date().getFullYear().toString(),", 나만의 서랍장 Co. all rights reserved."]})}),(0,l.jsx)("button",{className:"detail__close-btn",onClick:y,title:"메인으로 돌아가기",children:(0,l.jsx)(n.g,{icon:c.GRI})})]}):(0,l.jsxs)("div",{className:"detail__page detail__page--loading",children:[(0,l.jsxs)("div",{className:"detail__background",children:[(0,l.jsx)("div",{className:"detail__wave"}),(0,l.jsx)("div",{className:"detail__wave"}),(0,l.jsx)("div",{className:"detail__wave"})]}),(0,l.jsxs)("div",{className:"loading__container",children:[(0,l.jsx)("div",{className:"loading__spinner"}),(0,l.jsx)("p",{children:"장소 정보를 불러오는 중..."})]})]})}},9099:(e,a,s)=>{e.exports=s(8253)}},e=>{var a=a=>e(e.s=a);e.O(0,[725,772,650,636,593,792],()=>a(330)),_N_E=e.O()}]);