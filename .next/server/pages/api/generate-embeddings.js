"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate-embeddings";
exports.ids = ["pages/api/generate-embeddings"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-embeddings&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-embeddings.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-embeddings&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-embeddings.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_generate_embeddings_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/generate-embeddings.js */ \"(api-node)/./src/pages/api/generate-embeddings.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_generate_embeddings_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_generate_embeddings_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generate_embeddings_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_generate_embeddings_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate-embeddings\",\n        pathname: \"/api/generate-embeddings\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_generate_embeddings_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUtZW1iZWRkaW5ncyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGZ2VuZXJhdGUtZW1iZWRkaW5ncy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNtRTtBQUNuRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsa0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGtFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9nZW5lcmF0ZS1lbWJlZGRpbmdzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1lbWJlZGRpbmdzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VuZXJhdGUtZW1iZWRkaW5nc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-embeddings&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-embeddings.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/generate-embeddings.js":
/*!**********************************************!*\
  !*** ./src/pages/api/generate-embeddings.js ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"@pinecone-database/pinecone\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function handler(req, res) {\n    // CORS 설정\n    res.setHeader('Access-Control-Allow-Credentials', true);\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET,OPTIONS,PATCH,DELETE,POST,PUT');\n    res.setHeader('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version');\n    if (req.method === 'OPTIONS') {\n        res.status(200).end();\n        return;\n    }\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    try {\n        const { places, apiKey } = req.body;\n        if (!places || !Array.isArray(places)) {\n            return res.status(400).json({\n                error: 'Places data is required'\n            });\n        }\n        if (!apiKey) {\n            return res.status(400).json({\n                error: 'OpenAI API key is required'\n            });\n        }\n        // OpenAI 클라이언트 초기화\n        const openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            apiKey: apiKey\n        });\n        // Pinecone 클라이언트 초기화\n        const pinecone = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_1__.Pinecone({\n            apiKey: process.env.PINECONE_API_KEY\n        });\n        const indexName = process.env.PINECONE_INDEX_NAME || 'jeju-guide';\n        // Pinecone 인덱스 가져오기\n        const index = pinecone.index(indexName);\n        let processedCount = 0;\n        const vectors = [];\n        // 각 장소에 대해 임베딩 생성\n        for (const place of places){\n            try {\n                // 검색용 텍스트 생성 (장소명, 설명, 주소, 타입 결합)\n                const searchText = [\n                    place.name || '',\n                    place.description || '',\n                    place.addressDetail || place.address || '',\n                    place.type || ''\n                ].filter(Boolean).join(' ');\n                if (!searchText.trim()) {\n                    continue;\n                }\n                // OpenAI 임베딩 생성\n                const embeddingResponse = await openai.embeddings.create({\n                    model: 'text-embedding-3-small',\n                    input: searchText\n                });\n                const embedding = embeddingResponse.data[0].embedding;\n                // Pinecone에 저장할 벡터 데이터 준비\n                vectors.push({\n                    id: place.id,\n                    values: embedding,\n                    metadata: {\n                        name: place.name,\n                        type: place.type,\n                        description: place.description.substring(0, 500),\n                        address: place.addressDetail || place.address || '',\n                        searchText: searchText.substring(0, 1000)\n                    }\n                });\n                processedCount++;\n                // 50개씩 배치로 처리 (더 작은 배치로 안정성 증대)\n                if (vectors.length >= 50) {\n                    await index.upsert(vectors);\n                    vectors.length = 0; // 배열 초기화\n                }\n                // API 레이트 리미트 방지를 위한 딜레이\n                await new Promise((resolve)=>setTimeout(resolve, 200));\n            } catch (error) {\n                console.error(`Error processing place ${place.id}:`, error);\n                continue;\n            }\n        }\n        // 남은 벡터들 처리\n        if (vectors.length > 0) {\n            await index.upsert(vectors);\n        }\n        res.status(200).json({\n            success: true,\n            processedCount,\n            totalPlaces: places.length,\n            message: `Successfully generated embeddings for ${processedCount} places`\n        });\n    } catch (error) {\n        console.error('Error generating embeddings:', error);\n        res.status(500).json({\n            error: 'Failed to generate embeddings',\n            details: error.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvZ2VuZXJhdGUtZW1iZWRkaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRCO0FBQzJCO0FBRXhDLGVBQWVFLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxVQUFVO0lBQ1ZBLElBQUlDLFNBQVMsQ0FBQyxvQ0FBb0M7SUFDbERELElBQUlDLFNBQVMsQ0FBQywrQkFBK0I7SUFDN0NELElBQUlDLFNBQVMsQ0FBQyxnQ0FBZ0M7SUFDOUNELElBQUlDLFNBQVMsQ0FDWCxnQ0FDQTtJQUdGLElBQUlGLElBQUlHLE1BQU0sS0FBSyxXQUFXO1FBQzVCRixJQUFJRyxNQUFNLENBQUMsS0FBS0MsR0FBRztRQUNuQjtJQUNGO0lBRUEsSUFBSUwsSUFBSUcsTUFBTSxLQUFLLFFBQVE7UUFDekIsT0FBT0YsSUFBSUcsTUFBTSxDQUFDLEtBQUtFLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR1QsSUFBSVUsSUFBSTtRQUVuQyxJQUFJLENBQUNGLFVBQVUsQ0FBQ0csTUFBTUMsT0FBTyxDQUFDSixTQUFTO1lBQ3JDLE9BQU9QLElBQUlHLE1BQU0sQ0FBQyxLQUFLRSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMEI7UUFDakU7UUFFQSxJQUFJLENBQUNFLFFBQVE7WUFDWCxPQUFPUixJQUFJRyxNQUFNLENBQUMsS0FBS0UsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQTZCO1FBQ3BFO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU1NLFNBQVMsSUFBSWhCLDhDQUFNQSxDQUFDO1lBQ3hCWSxRQUFRQTtRQUNWO1FBRUEscUJBQXFCO1FBQ3JCLE1BQU1LLFdBQVcsSUFBSWhCLGlFQUFRQSxDQUFDO1lBQzVCVyxRQUFRTSxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtRQUN0QztRQUVBLE1BQU1DLFlBQVlILFFBQVFDLEdBQUcsQ0FBQ0csbUJBQW1CLElBQUk7UUFFckQsb0JBQW9CO1FBQ3BCLE1BQU1DLFFBQVFOLFNBQVNNLEtBQUssQ0FBQ0Y7UUFFN0IsSUFBSUcsaUJBQWlCO1FBQ3JCLE1BQU1DLFVBQVUsRUFBRTtRQUVsQixrQkFBa0I7UUFDbEIsS0FBSyxNQUFNQyxTQUFTZixPQUFRO1lBQzFCLElBQUk7Z0JBQ0Ysa0NBQWtDO2dCQUNsQyxNQUFNZ0IsYUFBYTtvQkFDakJELE1BQU1FLElBQUksSUFBSTtvQkFDZEYsTUFBTUcsV0FBVyxJQUFJO29CQUNyQkgsTUFBTUksYUFBYSxJQUFJSixNQUFNSyxPQUFPLElBQUk7b0JBQ3hDTCxNQUFNTSxJQUFJLElBQUk7aUJBQ2YsQ0FBQ0MsTUFBTSxDQUFDQyxTQUFTQyxJQUFJLENBQUM7Z0JBRXZCLElBQUksQ0FBQ1IsV0FBV1MsSUFBSSxJQUFJO29CQUN0QjtnQkFDRjtnQkFFQSxnQkFBZ0I7Z0JBQ2hCLE1BQU1DLG9CQUFvQixNQUFNckIsT0FBT3NCLFVBQVUsQ0FBQ0MsTUFBTSxDQUFDO29CQUN2REMsT0FBTztvQkFDUEMsT0FBT2Q7Z0JBQ1Q7Z0JBRUEsTUFBTWUsWUFBWUwsa0JBQWtCTSxJQUFJLENBQUMsRUFBRSxDQUFDRCxTQUFTO2dCQUVyRCwwQkFBMEI7Z0JBQzFCakIsUUFBUW1CLElBQUksQ0FBQztvQkFDWEMsSUFBSW5CLE1BQU1tQixFQUFFO29CQUNaQyxRQUFRSjtvQkFDUkssVUFBVTt3QkFDUm5CLE1BQU1GLE1BQU1FLElBQUk7d0JBQ2hCSSxNQUFNTixNQUFNTSxJQUFJO3dCQUNoQkgsYUFBYUgsTUFBTUcsV0FBVyxDQUFDbUIsU0FBUyxDQUFDLEdBQUc7d0JBQzVDakIsU0FBU0wsTUFBTUksYUFBYSxJQUFJSixNQUFNSyxPQUFPLElBQUk7d0JBQ2pESixZQUFZQSxXQUFXcUIsU0FBUyxDQUFDLEdBQUc7b0JBQ3RDO2dCQUNGO2dCQUVBeEI7Z0JBRUEsZ0NBQWdDO2dCQUNoQyxJQUFJQyxRQUFRd0IsTUFBTSxJQUFJLElBQUk7b0JBQ3hCLE1BQU0xQixNQUFNMkIsTUFBTSxDQUFDekI7b0JBQ25CQSxRQUFRd0IsTUFBTSxHQUFHLEdBQUcsU0FBUztnQkFDL0I7Z0JBRUEseUJBQXlCO2dCQUN6QixNQUFNLElBQUlFLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVM7WUFFbkQsRUFBRSxPQUFPMUMsT0FBTztnQkFDZDRDLFFBQVE1QyxLQUFLLENBQUMsQ0FBQyx1QkFBdUIsRUFBRWdCLE1BQU1tQixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUVuQztnQkFFckQ7WUFDRjtRQUNGO1FBRUEsWUFBWTtRQUNaLElBQUllLFFBQVF3QixNQUFNLEdBQUcsR0FBRztZQUN0QixNQUFNMUIsTUFBTTJCLE1BQU0sQ0FBQ3pCO1FBQ3JCO1FBRUFyQixJQUFJRyxNQUFNLENBQUMsS0FBS0UsSUFBSSxDQUFDO1lBQ25COEMsU0FBUztZQUNUL0I7WUFDQWdDLGFBQWE3QyxPQUFPc0MsTUFBTTtZQUMxQlEsU0FBUyxDQUFDLHNDQUFzQyxFQUFFakMsZUFBZSxPQUFPLENBQUM7UUFDM0U7SUFFRixFQUFFLE9BQU9kLE9BQU87UUFDZDRDLFFBQVE1QyxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5Q04sSUFBSUcsTUFBTSxDQUFDLEtBQUtFLElBQUksQ0FBQztZQUNuQkMsT0FBTztZQUNQZ0QsU0FBU2hELE1BQU0rQyxPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpbmNlbnQta2ltL0Rlc2t0b3Avc29mdHdhcmUvd2ViLXByb2plY3RzL2planUtZ3VpZGUvc3JjL3BhZ2VzL2FwaS9nZW5lcmF0ZS1lbWJlZGRpbmdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IFBpbmVjb25lIH0gZnJvbSAnQHBpbmVjb25lLWRhdGFiYXNlL3BpbmVjb25lJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAvLyBDT1JTIOyEpOyglVxuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscycsIHRydWUpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpO1xuICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCxPUFRJT05TLFBBVENILERFTEVURSxQT1NULFBVVCcpO1xuICByZXMuc2V0SGVhZGVyKFxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJyxcbiAgICAnWC1DU1JGLVRva2VuLCBYLVJlcXVlc3RlZC1XaXRoLCBBY2NlcHQsIEFjY2VwdC1WZXJzaW9uLCBDb250ZW50LUxlbmd0aCwgQ29udGVudC1NRDUsIENvbnRlbnQtVHlwZSwgRGF0ZSwgWC1BcGktVmVyc2lvbidcbiAgKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgcmVzLnN0YXR1cygyMDApLmVuZCgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcGxhY2VzLCBhcGlLZXkgfSA9IHJlcS5ib2R5O1xuXG4gICAgaWYgKCFwbGFjZXMgfHwgIUFycmF5LmlzQXJyYXkocGxhY2VzKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdQbGFjZXMgZGF0YSBpcyByZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnT3BlbkFJIEFQSSBrZXkgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIE9wZW5BSSDtgbTrnbzsnbTslrjtirgg7LSI6riw7ZmUXG4gICAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gICAgICBhcGlLZXk6IGFwaUtleSxcbiAgICB9KTtcblxuICAgIC8vIFBpbmVjb25lIO2BtOudvOydtOyWuO2KuCDstIjquLDtmZRcbiAgICBjb25zdCBwaW5lY29uZSA9IG5ldyBQaW5lY29uZSh7XG4gICAgICBhcGlLZXk6IHByb2Nlc3MuZW52LlBJTkVDT05FX0FQSV9LRVksXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmRleE5hbWUgPSBwcm9jZXNzLmVudi5QSU5FQ09ORV9JTkRFWF9OQU1FIHx8ICdqZWp1LWd1aWRlJztcbiAgICBcbiAgICAvLyBQaW5lY29uZSDsnbjrjbHsiqQg6rCA7KC47Jik6riwXG4gICAgY29uc3QgaW5kZXggPSBwaW5lY29uZS5pbmRleChpbmRleE5hbWUpO1xuXG4gICAgbGV0IHByb2Nlc3NlZENvdW50ID0gMDtcbiAgICBjb25zdCB2ZWN0b3JzID0gW107XG5cbiAgICAvLyDqsIEg7J6l7IaM7JeQIOuMgO2VtCDsnoTrsqDrlKkg7IOd7ISxXG4gICAgZm9yIChjb25zdCBwbGFjZSBvZiBwbGFjZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIOqygOyDieyaqSDthY3siqTtirgg7IOd7ISxICjsnqXshozrqoUsIOyEpOuqhSwg7KO87IaMLCDtg4DsnoUg6rKw7ZWpKVxuICAgICAgICBjb25zdCBzZWFyY2hUZXh0ID0gW1xuICAgICAgICAgIHBsYWNlLm5hbWUgfHwgJycsXG4gICAgICAgICAgcGxhY2UuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgcGxhY2UuYWRkcmVzc0RldGFpbCB8fCBwbGFjZS5hZGRyZXNzIHx8ICcnLFxuICAgICAgICAgIHBsYWNlLnR5cGUgfHwgJycsXG4gICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJyAnKTtcblxuICAgICAgICBpZiAoIXNlYXJjaFRleHQudHJpbSgpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPcGVuQUkg7J6E67Kg65SpIOyDneyEsVxuICAgICAgICBjb25zdCBlbWJlZGRpbmdSZXNwb25zZSA9IGF3YWl0IG9wZW5haS5lbWJlZGRpbmdzLmNyZWF0ZSh7XG4gICAgICAgICAgbW9kZWw6ICd0ZXh0LWVtYmVkZGluZy0zLXNtYWxsJyxcbiAgICAgICAgICBpbnB1dDogc2VhcmNoVGV4dCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZW1iZWRkaW5nID0gZW1iZWRkaW5nUmVzcG9uc2UuZGF0YVswXS5lbWJlZGRpbmc7XG5cbiAgICAgICAgLy8gUGluZWNvbmXsl5Ag7KCA7J6l7ZWgIOuyoe2EsCDrjbDsnbTthLAg7KSA67mEXG4gICAgICAgIHZlY3RvcnMucHVzaCh7XG4gICAgICAgICAgaWQ6IHBsYWNlLmlkLFxuICAgICAgICAgIHZhbHVlczogZW1iZWRkaW5nLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICBuYW1lOiBwbGFjZS5uYW1lLFxuICAgICAgICAgICAgdHlwZTogcGxhY2UudHlwZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBwbGFjZS5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTAwKSwgLy8g66mU7YOA642w7J207YSwIO2BrOq4sCDsoJztlZxcbiAgICAgICAgICAgIGFkZHJlc3M6IHBsYWNlLmFkZHJlc3NEZXRhaWwgfHwgcGxhY2UuYWRkcmVzcyB8fCAnJyxcbiAgICAgICAgICAgIHNlYXJjaFRleHQ6IHNlYXJjaFRleHQuc3Vic3RyaW5nKDAsIDEwMDApLCAvLyDqsoDsg4kg7YWN7Iqk7Yq4IOyggOyepVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcHJvY2Vzc2VkQ291bnQrKztcbiAgICAgICAgXG4gICAgICAgIC8vIDUw6rCc7JSpIOuwsOy5mOuhnCDsspjrpqwgKOuNlCDsnpHsnYAg67Cw7LmY66GcIOyViOygleyEsSDspp3rjIApXG4gICAgICAgIGlmICh2ZWN0b3JzLmxlbmd0aCA+PSA1MCkge1xuICAgICAgICAgIGF3YWl0IGluZGV4LnVwc2VydCh2ZWN0b3JzKTtcbiAgICAgICAgICB2ZWN0b3JzLmxlbmd0aCA9IDA7IC8vIOuwsOyXtCDstIjquLDtmZRcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQVBJIOugiOydtO2KuCDrpqzrr7jtirgg67Cp7KeA66W8IOychO2VnCDrlJzroIjsnbRcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHBsYWNlICR7cGxhY2UuaWR9OmAsIGVycm9yKTtcbiAgICAgICAgLy8g6rCc67OEIOyepeyGjCDsspjrpqwg7Iuk7Yyo64qUIOyghOyytCDtlITroZzshLjsiqTrpbwg7KSR64uo7ZWY7KeAIOyViuydjFxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDrgqjsnYAg67Kh7YSw65OkIOyymOumrFxuICAgIGlmICh2ZWN0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IGluZGV4LnVwc2VydCh2ZWN0b3JzKTtcbiAgICB9XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcHJvY2Vzc2VkQ291bnQsXG4gICAgICB0b3RhbFBsYWNlczogcGxhY2VzLmxlbmd0aCxcbiAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgZ2VuZXJhdGVkIGVtYmVkZGluZ3MgZm9yICR7cHJvY2Vzc2VkQ291bnR9IHBsYWNlc2BcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgZW1iZWRkaW5nczonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgZW1iZWRkaW5ncycsXG4gICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiT3BlbkFJIiwiUGluZWNvbmUiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2V0SGVhZGVyIiwibWV0aG9kIiwic3RhdHVzIiwiZW5kIiwianNvbiIsImVycm9yIiwicGxhY2VzIiwiYXBpS2V5IiwiYm9keSIsIkFycmF5IiwiaXNBcnJheSIsIm9wZW5haSIsInBpbmVjb25lIiwicHJvY2VzcyIsImVudiIsIlBJTkVDT05FX0FQSV9LRVkiLCJpbmRleE5hbWUiLCJQSU5FQ09ORV9JTkRFWF9OQU1FIiwiaW5kZXgiLCJwcm9jZXNzZWRDb3VudCIsInZlY3RvcnMiLCJwbGFjZSIsInNlYXJjaFRleHQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJhZGRyZXNzRGV0YWlsIiwiYWRkcmVzcyIsInR5cGUiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsInRyaW0iLCJlbWJlZGRpbmdSZXNwb25zZSIsImVtYmVkZGluZ3MiLCJjcmVhdGUiLCJtb2RlbCIsImlucHV0IiwiZW1iZWRkaW5nIiwiZGF0YSIsInB1c2giLCJpZCIsInZhbHVlcyIsIm1ldGFkYXRhIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwidXBzZXJ0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiY29uc29sZSIsInN1Y2Nlc3MiLCJ0b3RhbFBsYWNlcyIsIm1lc3NhZ2UiLCJkZXRhaWxzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/generate-embeddings.js\n");

/***/ }),

/***/ "@pinecone-database/pinecone":
/*!**********************************************!*\
  !*** external "@pinecone-database/pinecone" ***!
  \**********************************************/
/***/ ((module) => {

module.exports = require("@pinecone-database/pinecone");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate-embeddings&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fgenerate-embeddings.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();